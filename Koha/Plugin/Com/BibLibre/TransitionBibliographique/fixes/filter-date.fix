# title: Filtrer par date
# description: Exemple d'implémentation d'un FIX Catamandu avec une sélection de notices par les dates.

# Exemple: garde les notices ayant un jour et mois particulier
marc_map(001, 'id')
#marc_map(211a, 'pubdate')
marc_map(620f, 'pubdate')

parse_text(pubdate, '(?<year>\d\d\d\d)(?<month>\d\d)(?<day>\d\d)')

if any_match(pubdate.month, '01')
  if any_match(pubdate.day, '20')
    retain(id,pubdate)
  else
    reject ()
  end
else
  reject ()
end
